<ons-page on-device-backbutton="app.navigator.popPage()" ng-controller="productoCtrl">
    <ons-toolbar>
        <div class="left">
            <ons-toolbar-button ng-show="{{getVieneDePedido() === 1}}" ng-click="app.navigator.resetToPage('pedidosAM.html');">
                 <ons-icon icon="ion-arrow-left-c" style="font-size: 28px;" fixed-width="false"></ons-icon>
            </ons-toolbar-button>
            <ons-toolbar-button ng-show="{{getVieneDePedido() === 0}}" ng-click="app.slidingMenu.toggleMenu()">
                <ons-icon icon="bars"></ons-icon>
            </ons-toolbar-button>
        </div>
        <div class="left">
            <ons-toolbar-button ng-click="app.slidingMenu.toggleMenu()"><ons-icon icon="bars"></ons-icon></ons-toolbar-button>
        </div>
        <div class="center">Productos</div>
        <div class="right">
            <ons-toolbar-button ng-click="productos()">
                <ons-icon icon="ion-loop" 
                          fixed-width="false" 
                          style="vertical-align: -4px;">

                </ons-icon>
            </ons-toolbar-button>
            <ons-toolbar-button ng-click="promptBuscar()">
                <ons-icon icon="ion-search" 
                          fixed-width="false" 
                          style="vertical-align: -4px;">

                </ons-icon>
            </ons-toolbar-button>
            <ons-toolbar-button ng-click="adelanteEdicion()">
                <ons-icon icon="ion-plus-round" 
                          fixed-width="false" 
                          style="vertical-align: -4px;">

                </ons-icon>
            </ons-toolbar-button>
        </div>            
    </ons-toolbar>

    <ons-list>

        <ons-list-item modifier="chevron" class="list-item-container"
                       ng-repeat="prod in getProductos()"
                       ng-click="getVieneDePedido() === 0?editarVer($index):seleccionarProductoPedido($index)"
                       >
            <ons-row>
                <ons-col>
                    <div class="name">
                        {{prod.producto}}
                    </div>
                    <div class="location">
                        <i class="fa fa-usd"></i> {{prod.precio}}
                        <div style="margin-top: 5px;">
                            Cod.: {{prod.codigo}}
                        </div>
                        <div style="margin-top: 5px;">
                            Vto.: {{prod.fechaVencimiento| date:'dd-MM-yyyy'}}
                        </div>
                    </div>
                </ons-col>
                <ons-col width="40px">

                </ons-col>
            </ons-row>
        </ons-list-item>
        <ons-list-item modifier="tappable"
                       ng-show="!trayendo"
                       ng-click="traerMas()">
            <ons-row style="text-align: center; margin-top: 5px; margin-bottom: 5px;
                     opacity: 0.3;">
                <ons-col width="100%">
                    <ons-icon icon="ion-plus-circled" size="40px"></ons-icon>
                </ons-col>
            </ons-row>
        </ons-list-item>
        <ons-list-item ng-show="trayendo">
            <ons-row style="text-align: center; margin-top: 5px; margin-bottom: 5px;
                     opacity: 0.3;">
                <ons-col width="100%">
                    <ons-icon icon="ion-load-c" size="40px" spin="true"></ons-icon>
                </ons-col>
            </ons-row>
        </ons-list-item>
    </ons-list>

</ons-page>
